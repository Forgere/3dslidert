<!DOCTYPE html>
<html lang="en" class="no-js">
	<head>
		<meta charset="UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<link rel="stylesheet" type="text/css" href="css/default.css" />
		<link rel="stylesheet" type="text/css" href="css/component.css" />
		<script src="js/modernizr.custom.js"></script>
	</head>
	<body>
		<div class="container">
			<div id="gr-gallery" class="gr-gallery">
				<div class="gr-main">
				</div>
			</div>
		</div><!-- /container -->
		<script src="http://libs.useso.com/js/jquery/1.8.3/jquery.min.js"></script>
		<script src="js/wallgallery.js"></script>
		<script>
			$(function() {
				var form = new FormData();
				form.append("authCd", "1");
				form.append("token", "1B7AD96229434CC5A280850161C8F3A2");
				form.append("challengeId", "1");

				var settings = {
				  "async": true,
				  "crossDomain": true,
				  "url": "http://dev.kadashow.com:8000/api/v1/galleryshare/Mzg5MDEwNDEzMTM%253D/",
				  "method": "GET",
				  "headers": {
				    "cache-control": "no-cache",
				    "postman-token": "09159362-71d7-bbce-4b41-e0c7abf82881"
				  },
				  "processData": false,
				  "contentType": 'json',
				  "mimeType": "multipart/form-data",
				  "data": form
				};

				$.ajax(settings).done(function (response) {
				  console.log(response);
				});
				var ajax = {
				  "author": {
				    "id": 55,
				    "resource_uri": "/api/v1/user/55/",
				    "user_profile": {
				      "avatar": "User/55/portrait/p2016061509184314H67.jpg",
				      "birthday": null,
				      "created": "2016-06-08T20:24:38.496156",
				      "experts_cert": false,
				      "gender": 1,
				      "id": 54,
				      "intro": "",
				      "location": null,
				      "model_cert": false,
				      "nickname": "杨桃",
				      "pg_cert": false,
				      "resource_uri": "/api/v1/user_profile/54/",
				      "tags": [],
				      "updated": "2016-06-15T09:43:40.249185",
				      "user": "/api/v1/user/55/",
				      "user_cert": false,
				      "user_state": 1,
				      "user_type": 0
				    }
				  },
				  "comment_count": 11,
				  "created": "2016-06-15T09:21:43.566341",
				  "description": "我的青春我做主，敢拼才会赢，加油吧骚年",
				  "equipment": "我用的是苹果100plus拍摄",
				  "favourited": 0,
				  "id": 104,
				  "like_count": 3,
				  "liked": 0,
				  "likes": [
				    {
				      "id": 42,
				      "resource_uri": "/api/v1/user/42/",
				      "user_profile": {
				        "avatar": "User/42/portrait/p20160614214147339W4.jpg",
				        "birthday": null,
				        "created": "2016-06-07T18:33:52.148188",
				        "experts_cert": false,
				        "gender": 0,
				        "id": 41,
				        "intro": "",
				        "location": null,
				        "model_cert": false,
				        "nickname": "默默哦",
				        "pg_cert": false,
				        "resource_uri": "/api/v1/user_profile/41/",
				        "tags": [],
				        "updated": "2016-06-14T21:41:47.872606",
				        "user": "/api/v1/user/42/",
				        "user_cert": false,
				        "user_state": 1,
				        "user_type": 0
				      }
				    },
				    {
				      "id": 52,
				      "resource_uri": "/api/v1/user/52/",
				      "user_profile": {
				        "avatar": null,
				        "birthday": null,
				        "created": "2016-06-08T16:22:27.076245",
				        "experts_cert": false,
				        "gender": 1,
				        "id": 51,
				        "intro": "",
				        "location": null,
				        "model_cert": false,
				        "nickname": "昵称",
				        "pg_cert": false,
				        "resource_uri": "/api/v1/user_profile/51/",
				        "tags": [],
				        "updated": "2016-06-12T12:08:58.289525",
				        "user": "/api/v1/user/52/",
				        "user_cert": false,
				        "user_state": 1,
				        "user_type": 0
				      }
				    },
				    {
				      "id": 55,
				      "resource_uri": "/api/v1/user/55/",
				      "user_profile": {
				        "avatar": "User/55/portrait/p2016061509184314H67.jpg",
				        "birthday": null,
				        "created": "2016-06-08T20:24:38.496156",
				        "experts_cert": false,
				        "gender": 1,
				        "id": 54,
				        "intro": "",
				        "location": null,
				        "model_cert": false,
				        "nickname": "杨桃",
				        "pg_cert": false,
				        "resource_uri": "/api/v1/user_profile/54/",
				        "tags": [],
				        "updated": "2016-06-15T09:43:40.249185",
				        "user": "/api/v1/user/55/",
				        "user_cert": false,
				        "user_state": 1,
				        "user_type": 0
				      }
				    }
				  ],
				  "name": "青春不惧挑战",
				  "photos": [
				    {
				      "created": "2016-06-15T09:21:43.579827",
				      "description": "",
				      "exif": "exif信息待取",
				      "id": 435,
				      "image": "55/gallery/0/002016061509191852O96.jpg",
				      "resource_uri": "",
				      "updated": "2016-06-15T09:21:43.675170"
				    },
				    {
				      "created": "2016-06-15T09:21:43.585092",
				      "description": "",
				      "exif": "exif信息待取",
				      "id": 436,
				      "image": "55/gallery/0/0020160615091926545L2.jpg",
				      "resource_uri": "",
				      "updated": "2016-06-15T09:21:43.700348"
				    },
				    {
				      "created": "2016-06-15T09:21:43.591057",
				      "description": "",
				      "exif": "exif信息待取",
				      "id": 437,
				      "image": "55/gallery/0/002016061509193401V33.jpg",
				      "resource_uri": "",
				      "updated": "2016-06-15T09:21:43.725092"
				    }
				  ],
				  "resource_uri": "/api/v1/galleryshare/104/",
				  "scene_seq": [
				    201,
				    202,
				    203
				  ],
				  "scenes": [
				    {
				      "created": "2016-06-15T09:21:43.603396",
				      "id": 201,
				      "photo_seq": "435",
				      "resource_uri": "/api/v1/scene/201/",
				      "scene_template": {
				        "canvas_config": "one",
				        "capacity": 1,
				        "cover": "System/scene/cover/Abg_03_80BnO9w.jpg",
				        "created": "2016-06-13T17:00:38.347979",
				        "flat": "System/scene/2D/Abg_02_1e154lS.jpg",
				        "id": 5,
				        "photo_frames": [
				          {
				            "corner": "System/scene/frame/corner/sy-c_16左上_MQQRZTo.png",
				            "created": "2016-06-13T17:02:21.027322",
				            "description": "木质-1",
				            "id": 4,
				            "name": "木质-1",
				            "resource_uri": "",
				            "texture": "System/scene/frame/texture/sy-c_17_VvONaN8.png",
				            "updated": "2016-06-13T17:08:48.350973"
				          }
				        ],
				        "resource_uri": "",
				        "three_dimension": "System/scene/3D/Abg_01_PZPbljG.jpg",
				        "updated": "2016-06-14T20:37:04.633702"
				      },
				      "updated": "2016-06-15T09:21:43.603456"
				    },
				    {
				      "created": "2016-06-15T09:21:43.616446",
				      "id": 202,
				      "photo_seq": "436",
				      "resource_uri": "/api/v1/scene/202/",
				      "scene_template": {
				        "canvas_config": "one",
				        "capacity": 1,
				        "cover": "System/scene/cover/Abg_03_80BnO9w.jpg",
				        "created": "2016-06-13T17:00:38.347979",
				        "flat": "System/scene/2D/Abg_02_1e154lS.jpg",
				        "id": 5,
				        "photo_frames": [
				          {
				            "corner": "System/scene/frame/corner/sy-c_16左上_MQQRZTo.png",
				            "created": "2016-06-13T17:02:21.027322",
				            "description": "木质-1",
				            "id": 4,
				            "name": "木质-1",
				            "resource_uri": "",
				            "texture": "System/scene/frame/texture/sy-c_17_VvONaN8.png",
				            "updated": "2016-06-13T17:08:48.350973"
				          }
				        ],
				        "resource_uri": "",
				        "three_dimension": "System/scene/3D/Abg_01_PZPbljG.jpg",
				        "updated": "2016-06-14T20:37:04.633702"
				      },
				      "updated": "2016-06-15T09:21:43.616510"
				    },
				    {
				      "created": "2016-06-15T09:21:43.633776",
				      "id": 203,
				      "photo_seq": "437",
				      "resource_uri": "/api/v1/scene/203/",
				      "scene_template": {
				        "canvas_config": "one",
				        "capacity": 1,
				        "cover": "System/scene/cover/Abg_03_80BnO9w.jpg",
				        "created": "2016-06-13T17:00:38.347979",
				        "flat": "System/scene/2D/Abg_02_1e154lS.jpg",
				        "id": 5,
				        "photo_frames": [
				          {
				            "corner": "System/scene/frame/corner/sy-c_16左上_MQQRZTo.png",
				            "created": "2016-06-13T17:02:21.027322",
				            "description": "木质-1",
				            "id": 4,
				            "name": "木质-1",
				            "resource_uri": "",
				            "texture": "System/scene/frame/texture/sy-c_17_VvONaN8.png",
				            "updated": "2016-06-13T17:08:48.350973"
				          }
				        ],
				        "resource_uri": "",
				        "three_dimension": "System/scene/3D/Abg_01_PZPbljG.jpg",
				        "updated": "2016-06-14T20:37:04.633702"
				      },
				      "updated": "2016-06-15T09:21:43.633862"
				    }
				  ],
				  "tags": [
				    "人物肖像2"
				  ],
				  "type_kbn": 0,
				  "updated": "2016-06-15T12:26:56.617782"
				};
				var ajaxphotos = ajax.scenes,
						// 每面墙的容量
						ajaxlayout = [],
						//由图片src组成数组
						romoteObject = [],
						//每面墙的相框相关图片
						wallgroup= [];
				$.each(ajaxphotos,function(i) {
					ajaxlayout[i] = ajaxphotos[i].scene_template.capacity;
					//图片src并入数组
					romoteObject[i] = "http://kadaphoto.img-cn-beijing.aliyuncs.com/User/" + ajax.photos[i].image + "@80p";
				});
				Gallery.init({
					layout : ajaxlayout,  //给主墙限定一个宽度是为了将图片限制在“墙”的范围内。每一面墙上的图片的数量是图片总数除以wallNumber(最后一面墙是剩下的图片)，我们也可以自定义每面墙上的图片数量(当图片总数不够填补最后一页时，有多少显示多少，没有则空白墙)
          romoteObject : romoteObject,// 图片数组
				});
			});
		</script>
	</body>
</html>
